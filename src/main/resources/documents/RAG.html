<!DOCTYPE html>
<!-- saved from url=(0042)https://docs.langchain4j.dev/tutorials/rag -->
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/rag" data-has-hydrated="true" data-theme="light" data-rh="lang,dir,class,data-has-hydrated"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="Docusaurus v3.6.3">
<title>RAG (Retrieval-Augmented Generation) | LangChain4j</title><link data-rh="true" rel="icon" href="https://docs.langchain4j.dev/img/favicon.ico"><link rel="preconnect" href="https://www.google-analytics.com/">
<link rel="preconnect" href="https://www.googletagmanager.com/">
<script async="" src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/js"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZK8CM68FC9",{anonymize_ip:!0})</script><link rel="stylesheet" href="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/styles.2ee86581.css">
<script src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/runtime~main.7672f7a7.js" defer="defer"></script>
<script src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/main.29993ce6.js" defer="defer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" data-rh="true"><meta name="twitter:card" content="summary_large_image" data-rh="true"><meta property="og:image" content="https://langchain4j.github.io/img/docusaurus-social-card.jpg" data-rh="true"><meta name="twitter:image" content="https://langchain4j.github.io/img/docusaurus-social-card.jpg" data-rh="true"><meta property="og:locale" content="en" data-rh="true"><meta name="docusaurus_locale" content="en" data-rh="true"><meta name="docsearch:language" content="en" data-rh="true"><meta name="docusaurus_version" content="current" data-rh="true"><meta name="docusaurus_tag" content="docs-default-current" data-rh="true"><meta name="docsearch:version" content="current" data-rh="true"><meta name="docsearch:docusaurus_tag" content="docs-default-current" data-rh="true"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/14eb3368.13ef8790.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/e15f3f2c.90fe7a0c.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/79f2ae87.5d70822e.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/14eb3368.13ef8790.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/f775dbb0.963a8619.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/0e384e19.d2df494b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/ba30efcf.8e68f00b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/7534805f.be90f4bc.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/7f7c20ca.d96c90ca.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/14eb3368.13ef8790.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/3b412954.c5b1c821.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/9e37048e.8c23e4b4.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/61555615.4f9ea5ad.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/f7d022b6.07cd487c.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c96fc44c.ab85b16d.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/23d03bf3.ef11eaaf.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/7caa7331.a04ea9c0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/7485ae2a.e2af72df.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/28090869.11dcdc40.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/93c4be00.f2e7327d.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/ec5183f1.aed97633.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/345a22fe.5a8e29b4.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/69469eb3.9fa30871.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/7bec9842.96762884.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/fbf7969f.915d0026.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/9a72d7e0.eef3c1b2.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="canonical" href="https://langchain4j.github.io/tutorials/rag" data-rh="true"><link rel="alternate" href="https://langchain4j.github.io/tutorials/rag" hreflang="en" data-rh="true"><link rel="alternate" href="https://langchain4j.github.io/tutorials/rag" hreflang="x-default" data-rh="true"><meta property="og:url" content="https://langchain4j.github.io/tutorials/rag" data-rh="true"><meta property="og:title" content="RAG (Retrieval-Augmented Generation) | LangChain4j" data-rh="true"><meta name="description" content="LLM&#39;s knowledge is limited to the data it has been trained on." data-rh="true"><meta property="og:description" content="LLM&#39;s knowledge is limited to the data it has been trained on." data-rh="true"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/17896441.37ab0467.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a1354e83.73a19f64.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/14eb3368.13ef8790.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/35b69cda.6c60ad0d.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/c4f5d8e4.c1eaf8b8.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7456010.eadc8d77.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/5e95c892.3545981b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/aba21aa0.5df5f423.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a7bd4aaa.fc7b027b.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/22dd74f7.49199af0.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/a94703ab.508209eb.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/14eb3368.13ef8790.js"><link rel="prefetch" href="https://docs.langchain4j.dev/assets/js/474456e9.560eae92.js"></head>
<body class="" cz-shortcut-listen="true" data-rh="class" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="https://docs.langchain4j.dev/tutorials/rag#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="https://docs.langchain4j.dev/"><div class="navbar__logo"><img src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/logo.svg" alt="LangChain4j Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"></div><b class="navbar__title text--truncate">LangChain4j</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="https://docs.langchain4j.dev/intro">Introduction</a><a class="navbar__item navbar__link" href="https://docs.langchain4j.dev/get-started">Get Started</a><a class="navbar__item navbar__link" href="https://docs.langchain4j.dev/category/tutorials">Tutorials</a><a class="navbar__item navbar__link" href="https://docs.langchain4j.dev/category/integrations">Integrations</a><a class="navbar__item navbar__link" href="https://docs.langchain4j.dev/useful-materials">Useful Materials</a><a href="https://github.com/langchain4j/langchain4j-examples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Examples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://docs.langchain4j.dev/apidocs/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Javadoc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/langchain4j/langchain4j" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input id="search_input_react" type="search" placeholder="Search ⌘+K" aria-label="Search" class="navbar__search-input search-bar ds-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="https://docs.langchain4j.dev/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="https://docs.langchain4j.dev/get-started">Get Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="https://docs.langchain4j.dev/category/tutorials">Tutorials</a><button aria-label="Collapse sidebar category &#39;Tutorials&#39;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/chat-and-language-models">Chat and Language Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/chat-memory">Chat Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/model-parameters">Model Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/response-streaming">Response Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/ai-services">AI Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/tools">Tools (Function Calling)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" tabindex="0" href="https://docs.langchain4j.dev/tutorials/rag" aria-current="page">RAG (Retrieval-Augmented Generation)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/structured-outputs">Structured Outputs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/classification">Classification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/embedding-stores">Embedding (Vector) Stores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/image-models">Image Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/quarkus-integration">Quarkus Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/spring-boot-integration">Spring Boot Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/kotlin">Kotlin Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/logging">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="https://docs.langchain4j.dev/tutorials/observability">Observability</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="https://docs.langchain4j.dev/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#39;Integrations&#39;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="https://docs.langchain4j.dev/category/useful-materials">Useful Materials</a><button aria-label="Expand sidebar category &#39;Useful Materials&#39;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="https://docs.langchain4j.dev/latest-release-notes">Latest Release Notes</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="https://docs.langchain4j.dev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="https://docs.langchain4j.dev/category/tutorials"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RAG (Retrieval-Augmented Generation)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RAG (Retrieval-Augmented Generation)</h1></header>
<p>LLM's knowledge is limited to the data it has been trained on.
If you want to make an LLM aware of domain-specific knowledge or proprietary data, you can:</p>
<ul>
<li>Use RAG, which we will cover in this section</li>
<li>Fine-tune the LLM with your data</li>
<li><a href="https://gorilla.cs.berkeley.edu/blogs/9_raft.html" target="_blank" rel="noopener noreferrer">Combine both RAG and fine-tuning</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-rag">What is RAG?<a href="https://docs.langchain4j.dev/tutorials/rag#what-is-rag" class="hash-link" aria-label="Direct link to What is RAG?" title="Direct link to What is RAG?">​</a></h2>
<p>Simply put, RAG is the way to find and inject relevant pieces of information from your data
into the prompt before sending it to the LLM.
This way LLM will get (hopefully) relevant information and will be able to reply using this information,
which should reduce the probability of hallucinations.</p>
<p>Relevant pieces of information can be found using various
<a href="https://en.wikipedia.org/wiki/Information_retrieval" target="_blank" rel="noopener noreferrer">information retrieval</a> methods.
The most popular are:</p>
<ul>
<li>Full-text (keyword) search. This method uses techniques like TF-IDF and BM25
to search documents by matching the keywords in a query (e.g., what the user is asking)
against a database of documents.
It ranks results based on the frequency and relevance of these keywords in each document.</li>
<li>Vector search, also known as "semantic search".
Text documents are converted into vectors of numbers using embedding models.
It then finds and ranks documents based on the cosine similarity
or other similarity/distance measures between the query vector and document vectors,
thus capturing deeper semantic meanings.</li>
<li>Hybrid. Combining multiple search methods (e.g., full-text + vector) usually improves the effectiveness of the search.</li>
</ul>
<p>Currently, this page focuses mostly on vector search.
Full-text and hybrid search are currently supported only by Azure AI Search integration,
see <code>AzureAiSearchContentRetriever</code> for more details.
We plan to expand the RAG toolbox to include full-text and hybrid search in the near future.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rag-stages">RAG Stages<a href="https://docs.langchain4j.dev/tutorials/rag#rag-stages" class="hash-link" aria-label="Direct link to RAG Stages" title="Direct link to RAG Stages">​</a></h2>
<p>The RAG process is divided into 2 distinct stages: indexing and retrieval.
LangChain4j provides tooling for both stages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="indexing">Indexing<a href="https://docs.langchain4j.dev/tutorials/rag#indexing" class="hash-link" aria-label="Direct link to Indexing" title="Direct link to Indexing">​</a></h3>
<p>During the indexing stage, documents are pre-processed in a way that enables efficient search during the retrieval stage.</p>
<p>This process can vary depending on the information retrieval method used.
For vector search, this typically involves cleaning the documents, enriching them with additional data and metadata,
splitting them into smaller segments (aka chunking), embedding these segments, and finally storing them in an embedding store (aka vector database).</p>
<p>The indexing stage usually occurs offline, meaning it does not require end users to wait for its completion.
This can be achieved through, for example, a cron job that re-indexes internal company documentation once a week during the weekend.
The code responsible for indexing can also be a separate application that only handles indexing tasks.</p>
<p>However, in some scenarios, end users may want to upload their custom documents to make them accessible to the LLM.
In this case, indexing should be performed online and be a part of the main application.</p>
<p>Here is a simplified diagram of the indexing stage:
<a href="https://docs.langchain4j.dev/tutorials/rag"><img decoding="async" loading="lazy" src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/rag-ingestion-9b548e907df1c3c8948643795a981b95.png" width="1716" height="1089" class="img_ev3q"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieval">Retrieval<a href="https://docs.langchain4j.dev/tutorials/rag#retrieval" class="hash-link" aria-label="Direct link to Retrieval" title="Direct link to Retrieval">​</a></h3>
<p>The retrieval stage usually occurs online, when a user submits a question that should be answered using the indexed documents.</p>
<p>This process can vary depending on the information retrieval method used.
For vector search, this typically involves embedding the user's query (question)
and performing a similarity search in the embedding store.
Relevant segments (pieces of the original documents) are then injected into the prompt and sent to the LLM.</p>
<p>Here is a simplified diagram of the retrieval stage:
<a href="https://docs.langchain4j.dev/tutorials/rag"><img decoding="async" loading="lazy" src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/rag-retrieval-f525d2937abc08fed5cec36a7f08a4c3.png" width="2569" height="776" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rag-flavours-in-langchain4j">RAG Flavours in LangChain4j<a href="https://docs.langchain4j.dev/tutorials/rag#rag-flavours-in-langchain4j" class="hash-link" aria-label="Direct link to RAG Flavours in LangChain4j" title="Direct link to RAG Flavours in LangChain4j">​</a></h2>
<p>LangChain4j offers three flavors of RAG:</p>
<ul>
<li><a href="https://docs.langchain4j.dev/tutorials/rag/#easy-rag">Easy RAG</a>: the easiest way to start with RAG</li>
<li><a href="https://docs.langchain4j.dev/tutorials/rag/#naive-rag">Naive RAG</a>: a basic implementation of RAG using vector search</li>
<li><a href="https://docs.langchain4j.dev/tutorials/rag/#advanced-rag">Advanced RAG</a>: a modular RAG framework that allows for additional steps such as
query transformation, retrieval from multiple sources, and re-ranking</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="easy-rag">Easy RAG<a href="https://docs.langchain4j.dev/tutorials/rag#easy-rag" class="hash-link" aria-label="Direct link to Easy RAG" title="Direct link to Easy RAG">​</a></h2>
<p>LangChain4j has an "Easy RAG" feature that makes it as easy as possible to get started with RAG.
You don't have to learn about embeddings, choose a vector store, find the right embedding model,
figure out how to parse and split documents, etc.
Just point to your document(s), and LangChain4j will do its magic.</p>
<p>If you need a customizable RAG, skip to the <a href="https://docs.langchain4j.dev/tutorials/rag#rag-apis">next section</a>.</p>
<p>If you are using Quarkus, there is an even easier way to do Easy RAG.
Please read <a href="https://docs.quarkiverse.io/quarkus-langchain4j/dev/easy-rag.html" target="_blank" rel="noopener noreferrer">Quarkus documentation</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The quality of such "Easy RAG" will, of course, be lower than that of a tailored RAG setup.
However, this is the easiest way to start learning about RAG and/or make a proof of concept.
Later, you will be able to transition smoothly from Easy RAG to more advanced RAG,
adjusting and customizing more and more aspects.</p></div></div>
<ol>
<li>Import the <code>langchain4j-easy-rag</code> dependency:</li>
</ol>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token tag" style="color: rgb(0, 0, 159);">dependency</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token tag" style="color: rgb(0, 0, 159);">groupId</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain">dev.langchain4j</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;/</span><span class="token tag" style="color: rgb(0, 0, 159);">groupId</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token tag" style="color: rgb(0, 0, 159);">artifactId</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain">langchain4j-easy-rag</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;/</span><span class="token tag" style="color: rgb(0, 0, 159);">artifactId</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token tag" style="color: rgb(0, 0, 159);">version</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain">0.36.2</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;/</span><span class="token tag" style="color: rgb(0, 0, 159);">version</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&lt;/</span><span class="token tag" style="color: rgb(0, 0, 159);">dependency</span><span class="token tag punctuation" style="color: rgb(57, 58, 52);">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Let's load your documents:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocuments</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j/documentation"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will load all files from the specified directory.</p>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="false" open=""><summary>What is happening under the hood?</summary><div style="display: block; overflow: visible; height: auto; will-change: height; transition: height 246ms ease-in-out;"><div class="collapsibleContent_i85q"><p>The Apache Tika library, which supports a wide variety of document types,
is used to detect document types and parse them.
Since we did not explicitly specify which <code>DocumentParser</code> to use,
the <code>FileSystemDocumentLoader</code> will load an <code>ApacheTikaDocumentParser</code>,
provided by <code>langchain4j-easy-rag</code> dependency through SPI.</p></div></div></details>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="false" open=""><summary>How to customize loading documents?</summary><div style="display: block; overflow: visible; height: auto; will-change: height; transition: height 343ms ease-in-out;"><div class="collapsibleContent_i85q"><p>If you want to load documents from all subdirectories, you can use the <code>loadDocumentsRecursively</code> method:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocumentsRecursively</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j/documentation"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additionally, you can filter documents by using a glob or regex:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">PathMatcher</span><span class="token plain"> pathMatcher </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystems</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getDefault</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getPathMatcher</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"glob:*.pdf"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocuments</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j/documentation"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> pathMatcher</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>When using <code>loadDocumentsRecursively</code> method, you might want to use a double asterisk (instead of a single one)
in glob: <code>glob:**.pdf</code>.</p></div></div></div></div></details>
<ol start="3">
<li>Now, we need to preprocess and store documents in a specialized embedding store, also known as vector database.
This is necessary to quickly find relevant pieces of information when a user asks a question.
We can use any of our 15+ <a href="https://docs.langchain4j.dev/integrations/embedding-stores">supported embedding stores</a>,
but for simplicity, we will use an in-memory one:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">InMemoryEmbeddingStore</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">TextSegment</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> embeddingStore </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 159);">new</span><span class="token plain"> </span><span class="token class-name">InMemoryEmbeddingStore</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">EmbeddingStoreIngestor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">ingest</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">documents</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="true"><summary>What is happening under the hood?</summary><div style="display: none; overflow: hidden; height: 0px;"><div class="collapsibleContent_i85q"><ol>
<li>
<p>The <code>EmbeddingStoreIngestor</code> loads a <code>DocumentSplitter</code> from the <code>langchain4j-easy-rag</code> dependency through SPI.
Each <code>Document</code> is split into smaller pieces (<code>TextSegment</code>s) each consisting of no more than 300 tokens
and with a 30-token overlap.</p>
</li>
<li>
<p>The <code>EmbeddingStoreIngestor</code> loads an <code>EmbeddingModel</code> from the <code>langchain4j-easy-rag</code> dependency through SPI.
Each <code>TextSegment</code> is converted into an <code>Embedding</code> using the <code>EmbeddingModel</code>.</p>
</li>
</ol><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>We have chosen <a href="https://huggingface.co/BAAI/bge-small-en-v1.5" target="_blank" rel="noopener noreferrer">bge-small-en-v1.5</a> as the default embedding model for Easy RAG.
It has achieved an impressive score on the <a href="https://huggingface.co/spaces/mteb/leaderboard" target="_blank" rel="noopener noreferrer">MTEB leaderboard</a>,
and its quantized version occupies only 24 megabytes of space.
Therefore, we can easily load it into memory and run it in the same process using <a href="https://onnxruntime.ai/" target="_blank" rel="noopener noreferrer">ONNX Runtime</a>.</p><p>Yes, that's right, you can convert text into embeddings entirely offline, without any external services,
in the same JVM process.
LangChain4j offers 5 popular embedding models
<a href="https://github.com/langchain4j/langchain4j-embeddings" target="_blank" rel="noopener noreferrer">out-of-the-box</a>.</p></div></div><ol start="3">
<li>All <code>TextSegment</code>-<code>Embedding</code> pairs are stored in the <code>EmbeddingStore</code>.</li>
</ol></div></div></details>
<ol start="4">
<li>The last step is to create an <a href="https://docs.langchain4j.dev/tutorials/ai-services">AI Service</a> that will serve as our API to the LLM:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token keyword" style="color: rgb(0, 0, 159);">interface</span><span class="token plain"> </span><span class="token class-name">Assistant</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color: rgb(215, 58, 73);">chat</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">String</span><span class="token plain"> userMessage</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(57, 58, 52);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">ChatLanguageModel</span><span class="token plain"> chatModel </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">OpenAiChatModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">apiKey</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">System</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getenv</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"OPENAI_API_KEY"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">modelName</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token constant" style="color: rgb(54, 172, 170);">GPT_4_O_MINI</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">Assistant</span><span class="token plain"> assistant </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">AiServices</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">Assistant</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token keyword" style="color: rgb(0, 0, 159);">class</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chatLanguageModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">chatModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chatMemory</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">MessageWindowChatMemory</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">withMaxMessages</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">10</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">contentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">EmbeddingStoreContentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">from</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, we configure the <code>Assistant</code> to use an OpenAI LLM to answer user questions,
remember the 10 latest messages in the conversation,
and retrieve relevant content from an <code>EmbeddingStore</code> that contains our documents.</p>
<ol start="5">
<li>And now we are ready to chat with it!</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">String</span><span class="token plain"> answer </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> assistant</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chat</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"How to do Easy RAG with LangChain4j?"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-rag-apis">Core RAG APIs<a href="https://docs.langchain4j.dev/tutorials/rag#core-rag-apis" class="hash-link" aria-label="Direct link to Core RAG APIs" title="Direct link to Core RAG APIs">​</a></h2>
<p>LangChain4j offers a rich set of APIs to make it easy for you to build custom RAG pipelines,
ranging from simple ones to advanced ones.
In this section, we will cover the main domain classes and APIs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document">Document<a href="https://docs.langchain4j.dev/tutorials/rag#document" class="hash-link" aria-label="Direct link to Document" title="Direct link to Document">​</a></h3>
<p>A <code>Document</code> class represents an entire document, such as a single PDF file or a web page.
At the moment, the <code>Document</code> can only represent textual information,
but future updates will enable it to support images and tables as well.</p>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="false" open=""><summary>Useful methods</summary><div style="display: block; overflow: visible; height: auto; will-change: height; transition: height 282ms ease-in-out;"><div class="collapsibleContent_i85q"><ul>
<li><code>Document.text()</code> returns the text of the <code>Document</code></li>
<li><code>Document.metadata()</code> returns the <code>Metadata</code> of the <code>Document</code> (see "Metadata" section below)</li>
<li><code>Document.toTextSegment()</code> converts the <code>Document</code> into a <code>TextSegment</code> (see "TextSegment" section below)</li>
<li><code>Document.from(String, Metadata)</code> creates a <code>Document</code> from text and <code>Metadata</code></li>
<li><code>Document.from(String)</code> creates a <code>Document</code> from text with empty <code>Metadata</code></li>
</ul></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="metadata">Metadata<a href="https://docs.langchain4j.dev/tutorials/rag#metadata" class="hash-link" aria-label="Direct link to Metadata" title="Direct link to Metadata">​</a></h3>
<p>Each <code>Document</code> contains <code>Metadata</code>.
It stores meta information about the <code>Document</code>, such as its name, source, last update date, owner,
or any other relevant details.</p>
<p>The <code>Metadata</code> is stored as a key-value map, where the key is of the <code>String</code> type,
and the value can be one of the following types: <code>String</code>, <code>Integer</code>, <code>Long</code>, <code>Float</code>, <code>Double</code>.</p>
<p><code>Metadata</code> is useful for several reasons:</p>
<ul>
<li>When including the content of the <code>Document</code> in a prompt to the LLM,
metadata entries can also be included, providing the LLM with additional information to consider.
For example, providing the <code>Document</code> name and source can help improve the LLM's understanding of the content.</li>
<li>When searching for relevant content to include in the prompt,
one can filter by <code>Metadata</code> entries.
For example, you can narrow down a semantic search to only <code>Document</code>s
belonging to a specific owner.</li>
<li>When the source of the <code>Document</code> is updated (for example, a specific page of documentation),
one can easily locate the corresponding <code>Document</code> by its metadata entry (for example, "id", "source", etc.)
and update it in the <code>EmbeddingStore</code> as well to keep it in sync.</li>
</ul>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="false" open=""><summary>Useful methods</summary><div style="display: block; overflow: visible; height: auto; will-change: height; transition: height 309ms ease-in-out;"><div class="collapsibleContent_i85q"><ul>
<li><code>Metadata.from(Map)</code> creates <code>Metadata</code> from a <code>Map</code></li>
<li><code>Metadata.put(String key, String value)</code> / <code>put(String, int)</code> / etc., adds an entry to the <code>Metadata</code></li>
<li><code>Metadata.getString(String key)</code> / <code>getInteger(String key)</code> / etc., returns a value of the <code>Metadata</code> entry, casting it to the required type</li>
<li><code>Metadata.containsKey(String key)</code> checks whether <code>Metadata</code> contains an entry with the specified key</li>
<li><code>Metadata.remove(String key)</code> removes an entry from the <code>Metadata</code> by key</li>
<li><code>Metadata.copy()</code> returns a copy of the <code>Metadata</code></li>
<li><code>Metadata.toMap()</code> converts <code>Metadata</code> into a <code>Map</code></li>
</ul></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document-loader">Document Loader<a href="https://docs.langchain4j.dev/tutorials/rag#document-loader" class="hash-link" aria-label="Direct link to Document Loader" title="Direct link to Document Loader">​</a></h3>
<p>You can create a <code>Document</code> from a <code>String</code>, but a simpler method is to use one of our document loaders included in the library:</p>
<ul>
<li><code>FileSystemDocumentLoader</code> from the <code>langchain4j</code> module</li>
<li><code>UrlDocumentLoader</code> from the <code>langchain4j</code> module</li>
<li><code>AmazonS3DocumentLoader</code> from the <code>langchain4j-document-loader-amazon-s3</code> module</li>
<li><code>AzureBlobStorageDocumentLoader</code> from the <code>langchain4j-document-loader-azure-storage-blob</code> module</li>
<li><code>GitHubDocumentLoader</code> from the <code>langchain4j-document-loader-github</code> module</li>
<li><code>GoogleCloudStorageDocumentLoader</code> from the <code>langchain4j-document-loader-google-cloud-storage</code> module</li>
<li><code>SeleniumDocumentLoader</code> from the <code>langchain4j-document-loader-selenium</code> module</li>
<li><code>TencentCosDocumentLoader</code> from the <code>langchain4j-document-loader-tencent-cos</code> module</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document-parser">Document Parser<a href="https://docs.langchain4j.dev/tutorials/rag#document-parser" class="hash-link" aria-label="Direct link to Document Parser" title="Direct link to Document Parser">​</a></h3>
<p><code>Document</code>s can represent files in various formats, such as PDF, DOC, TXT, etc.
To parse each of these formats, there's a <code>DocumentParser</code> interface with several implementations included in the library:</p>
<ul>
<li><code>TextDocumentParser</code> from the <code>langchain4j</code> module, which can parse files in plain text format (e.g. TXT, HTML, MD, etc.)</li>
<li><code>ApachePdfBoxDocumentParser</code> from the <code>langchain4j-document-parser-apache-pdfbox</code> module, which can parse PDF files</li>
<li><code>ApachePoiDocumentParser</code> from the <code>langchain4j-document-parser-apache-poi</code> module, which can parse MS Office file formats
(e.g. DOC, DOCX, PPT, PPTX, XLS, XLSX, etc.)</li>
<li><code>ApacheTikaDocumentParser</code> from the <code>langchain4j-document-parser-apache-tika</code> module,
which can automatically detect and parse almost all existing file formats</li>
</ul>
<p>Here is an example of how to load one or multiple <code>Document</code>s from the file system:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// Load a single document</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">Document</span><span class="token plain"> document </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocument</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j/file.txt"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 159);">new</span><span class="token plain"> </span><span class="token class-name">TextDocumentParser</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// Load all documents from a directory</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocuments</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 159);">new</span><span class="token plain"> </span><span class="token class-name">TextDocumentParser</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// Load all *.txt documents from a directory</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">PathMatcher</span><span class="token plain"> pathMatcher </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystems</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getDefault</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getPathMatcher</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"glob:*.txt"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocuments</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> pathMatcher</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 159);">new</span><span class="token plain"> </span><span class="token class-name">TextDocumentParser</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// Load all documents from a directory and its subdirectories</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">FileSystemDocumentLoader</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">loadDocumentsRecursively</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"/home/langchain4j"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 159);">new</span><span class="token plain"> </span><span class="token class-name">TextDocumentParser</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also load documents without explicitly specifying a <code>DocumentParser</code>.
In this case, a default <code>DocumentParser</code> will be used.
The default one is loaded through SPI (e.g. from <code>langchain4j-document-parser-apache-tika</code> or <code>langchain4j-easy-rag</code>, if one of them is imported).
If no <code>DocumentParser</code>s are found through SPI, a <code>TextDocumentParser</code> is used as a fallback.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document-transformer">Document Transformer<a href="https://docs.langchain4j.dev/tutorials/rag#document-transformer" class="hash-link" aria-label="Direct link to Document Transformer" title="Direct link to Document Transformer">​</a></h3>
<p><code>DocumentTransformer</code> implementations can perform a variety of document transformations such as:</p>
<ul>
<li>Cleaning: This involves removing unnecessary noise from the <code>Document</code>'s text, which can save tokens and reduce distractions.</li>
<li>Filtering: to completely exclude particular <code>Document</code>s from the search.</li>
<li>Enriching: Additional information can be added to <code>Document</code>s to potentially enhance search results.</li>
<li>Summarizing: The <code>Document</code> can be summarized, and its short summary can be stored in the <code>Metadata</code>
to be later included in each <code>TextSegment</code> (which we will cover below) to potentially improve the search.</li>
<li>Etc.</li>
</ul>
<p><code>Metadata</code> entries can also be added, modified, or removed at this stage.</p>
<p>Currently, the only implementation provided out-of-the-box is <code>HtmlToTextDocumentTransformer</code>
in the <code>langchain4j-document-transformer-jsoup</code> module,
which can extract desired text content and metadata entries from the raw HTML.</p>
<p>Since there is no one-size-fits-all solution, we recommend implementing your own <code>DocumentTransformer</code>,
tailored to your unique data.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="text-segment">Text Segment<a href="https://docs.langchain4j.dev/tutorials/rag#text-segment" class="hash-link" aria-label="Direct link to Text Segment" title="Direct link to Text Segment">​</a></h3>
<p>Once your <code>Document</code>s are loaded, it is time to split (chunk) them into smaller segments (pieces).
LangChain4j's domain model includes a <code>TextSegment</code> class that represents a segment of a <code>Document</code>.
As the name suggests, <code>TextSegment</code> can represent only textual information.</p>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="true"><summary>To split or not to split?</summary><div style="display: none; overflow: hidden; height: 0px;"><div class="collapsibleContent_i85q"><p>There are several reasons why you might want to include only a few relevant segments
instead of the entire knowledge base in the prompt:</p><ul>
<li>LLMs have a limited context window, so the entire knowledge base might not fit</li>
<li>The more information you provide in the prompt, the longer it takes for the LLM to process it and respond</li>
<li>The more information you provide in the prompt, the more you pay</li>
<li>Irrelevant information in the prompt might distract the LLM and increase the chance of hallucinations</li>
<li>The more information you provide in the prompt, the harder it is to explain based on which information the LLM responded</li>
</ul><p>We can address these concerns by splitting a knowledge base into smaller, more digestible segments.
How big should those segments be? That is a good question. As always, it depends.</p><p>There are currently 2 widely used approaches:</p><ol>
<li>Each document (e.g., a PDF file, a web page, etc.) is atomic and indivisible.
During retrieval in the RAG pipeline, the N most relevant documents are retrieved and injected into the prompt.
You will most probably need to use a long-context LLM in this case since documents can be quite long.
This approach is suitable if retrieving complete documents is important,
such as when you can't afford to miss some details.</li>
</ol><ul>
<li>Pros: No context is lost.</li>
<li>Cons:
<ul>
<li>More tokens are consumed.</li>
<li>Sometimes, documents can contain multiple sections/topics, and not all of them are relevant to the query.</li>
<li>Vector search quality suffers because complete documents of various sizes are compressed into a single, fixed-length vector.</li>
</ul>
</li>
</ul><ol start="2">
<li>Documents are split into smaller segments, such as chapters, paragraphs, or sometimes even sentences.
During retrieval in the RAG pipeline, the N most relevant segments are retrieved and injected into the prompt.
The challenge lies in ensuring each segment provides sufficient context/information for the LLM to understand it.
Missing context can lead to the LLM misinterpreting the given segment and hallucinating.
A common strategy is to split documents into segments with overlap, but this doesn't completely solve the problem.
Several advanced techniques can help here, for example, "sentence window retrieval", "auto-merging retrieval",
and "parent document retrieval".
We won't go into details here, but essentially, these methods help to fetch more context around the retrieved segments,
providing the LLM with additional information before and after the retrieved segment.</li>
</ol><ul>
<li>Pros:
<ul>
<li>Better quality of vector search.</li>
<li>Reduced token consumption.</li>
</ul>
</li>
<li>Cons: Some context may still be lost.</li>
</ul></div></div></details>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="true"><summary>Useful methods</summary><div style="display: none; overflow: hidden; height: 0px;"><div class="collapsibleContent_i85q"><ul>
<li><code>TextSegment.text()</code> returns the text of the <code>TextSegment</code></li>
<li><code>TextSegment.metadata()</code> returns the <code>Metadata</code> of the <code>TextSegment</code></li>
<li><code>TextSegment.from(String, Metadata)</code> creates a <code>TextSegment</code> from text and <code>Metadata</code></li>
<li><code>TextSegment.from(String)</code> creates a <code>TextSegment</code> from text with empty <code>Metadata</code></li>
</ul></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document-splitter">Document Splitter<a href="https://docs.langchain4j.dev/tutorials/rag#document-splitter" class="hash-link" aria-label="Direct link to Document Splitter" title="Direct link to Document Splitter">​</a></h3>
<p>LangChain4j has a <code>DocumentSplitter</code> interface with several out-of-the-box implementations:</p>
<ul>
<li><code>DocumentByParagraphSplitter</code></li>
<li><code>DocumentByLineSplitter</code></li>
<li><code>DocumentBySentenceSplitter</code></li>
<li><code>DocumentByWordSplitter</code></li>
<li><code>DocumentByCharacterSplitter</code></li>
<li><code>DocumentByRegexSplitter</code></li>
<li>Recursive: <code>DocumentSplitters.recursive(...)</code></li>
</ul>
<p>They all work as follows:</p>
<ol>
<li>You instantiate a <code>DocumentSplitter</code>, specifying the desired size of <code>TextSegment</code>s and,
optionally, an overlap in characters or tokens.</li>
<li>You call the <code>split(Document)</code> or <code>splitAll(List&lt;Document&gt;)</code> methods of the <code>DocumentSplitter</code>.</li>
<li>The <code>DocumentSplitter</code> splits the given <code>Document</code>s into smaller units,
the nature of which varies with the splitter. For instance, <code>DocumentByParagraphSplitter</code> divides
a document into paragraphs (defined by two or more consecutive newline characters),
while <code>DocumentBySentenceSplitter</code> uses the OpenNLP library's sentence detector to split
a document into sentences, and so on.</li>
<li>The <code>DocumentSplitter</code> then combines these smaller units (paragraphs, sentences, words, etc.) into <code>TextSegment</code>s,
attempting to include as many units as possible in a single <code>TextSegment</code> without exceeding the limit set in step 1.
If some of the units are still too large to fit into a <code>TextSegment</code>, it calls a sub-splitter.
This is another <code>DocumentSplitter</code> capable of splitting units that do not fit into more granular units.
All <code>Metadata</code> entries are copied from the <code>Document</code> to each <code>TextSegment</code>.
A unique metadata entry "index" is added to each text segment.
The first <code>TextSegment</code> will contain <code>index=0</code>, the second <code>index=1</code>, and so on.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="text-segment-transformer">Text Segment Transformer<a href="https://docs.langchain4j.dev/tutorials/rag#text-segment-transformer" class="hash-link" aria-label="Direct link to Text Segment Transformer" title="Direct link to Text Segment Transformer">​</a></h3>
<p><code>TextSegmentTransformer</code> is similar to <code>DocumentTransformer</code> (described above), but it transforms <code>TextSegment</code>s.</p>
<p>As with the <code>DocumentTransformer</code>, there is no one-size-fits-all solution,
so we recommend implementing your own <code>TextSegmentTransformer</code>, tailored to your unique data.</p>
<p>One technique that works quite well for improving retrieval is to include the <code>Document</code> title or a short summary
in each <code>TextSegment</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding">Embedding<a href="https://docs.langchain4j.dev/tutorials/rag#embedding" class="hash-link" aria-label="Direct link to Embedding" title="Direct link to Embedding">​</a></h3>
<p>The <code>Embedding</code> class encapsulates a numerical vector that represents the "semantic meaning"
of the content that has been embedded (usually text, such as a <code>TextSegment</code>).</p>
<p>Read more about vector embeddings here:</p>
<ul>
<li><a href="https://www.elastic.co/what-is/vector-embedding" target="_blank" rel="noopener noreferrer">https://www.elastic.co/what-is/vector-embedding</a></li>
<li><a href="https://www.pinecone.io/learn/vector-embeddings/" target="_blank" rel="noopener noreferrer">https://www.pinecone.io/learn/vector-embeddings/</a></li>
<li><a href="https://cloud.google.com/blog/topics/developers-practitioners/meet-ais-multitool-vector-embeddings" target="_blank" rel="noopener noreferrer">https://cloud.google.com/blog/topics/developers-practitioners/meet-ais-multitool-vector-embeddings</a></li>
</ul>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="true"><summary>Useful methods</summary><div style="display: none; overflow: hidden; height: 0px;"><div class="collapsibleContent_i85q"><ul>
<li><code>Embedding.dimension()</code> returns the dimension of the embedding vector (its length)</li>
<li><code>CosineSimilarity.between(Embedding, Embedding)</code> calculates the cosine similarity between 2 <code>Embedding</code>s</li>
<li><code>Embedding.normalize()</code> normalizes the embedding vector (in place)</li>
</ul></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-model">Embedding Model<a href="https://docs.langchain4j.dev/tutorials/rag#embedding-model" class="hash-link" aria-label="Direct link to Embedding Model" title="Direct link to Embedding Model">​</a></h3>
<p>The <code>EmbeddingModel</code> interface represents a special type of model that converts text into an <code>Embedding</code>.</p>
<p>Currently supported embedding models can be found <a href="https://docs.langchain4j.dev/category/embedding-models">here</a>.</p>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="true"><summary>Useful methods</summary><div style="display: none; overflow: hidden; height: 0px;"><div class="collapsibleContent_i85q"><ul>
<li><code>EmbeddingModel.embed(String)</code> embeds the given text</li>
<li><code>EmbeddingModel.embed(TextSegment)</code> embeds the given <code>TextSegment</code></li>
<li><code>EmbeddingModel.embedAll(List&lt;TextSegment&gt;)</code> embeds all the given <code>TextSegment</code></li>
<li><code>EmbeddingModel.dimension()</code> returns the dimension of the <code>Embedding</code> produced by this model</li>
</ul></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-store">Embedding Store<a href="https://docs.langchain4j.dev/tutorials/rag#embedding-store" class="hash-link" aria-label="Direct link to Embedding Store" title="Direct link to Embedding Store">​</a></h3>
<p>The <code>EmbeddingStore</code> interface represents a store for <code>Embedding</code>s, also known as vector database.
It allows for the storage and efficient search of similar (close in the embedding space) <code>Embedding</code>s.</p>
<p>Currently supported embedding stores can be found <a href="https://docs.langchain4j.dev/integrations/embedding-stores">here</a>.</p>
<p><code>EmbeddingStore</code> can store <code>Embedding</code>s alone or together with the corresponding <code>TextSegment</code>:</p>
<ul>
<li>It can store only <code>Embedding</code>, by ID. Original embedded data can be stored elsewhere and correlated using the ID.</li>
<li>It can store both <code>Embedding</code> and the original data that has been embedded (usually <code>TextSegment</code>).</li>
</ul>
<details class="details_lb9f isBrowser_bmU9 alert alert--info details_b_Ee" data-collapsed="true"><summary>Useful methods</summary><div style="display: none; overflow: hidden; height: 0px;"><div class="collapsibleContent_i85q"><ul>
<li><code>EmbeddingStore.add(Embedding)</code> adds a given <code>Embedding</code> to the store and returns a random ID</li>
<li><code>EmbeddingStore.add(String id, Embedding)</code> adds a given <code>Embedding</code> with a specified ID to the store</li>
<li><code>EmbeddingStore.add(Embedding, TextSegment)</code> adds a given <code>Embedding</code> with an associated <code>TextSegment</code> to the store and returns a random ID</li>
<li><code>EmbeddingStore.addAll(List&lt;Embedding&gt;)</code> adds a list of given <code>Embedding</code>s to the store and returns a list of random IDs</li>
<li><code>EmbeddingStore.addAll(List&lt;Embedding&gt;, List&lt;TextSegment&gt;)</code> adds a list of given <code>Embedding</code>s with associated <code>TextSegment</code>s to the store and returns a list of random IDs</li>
<li><code>EmbeddingStore.addAll(List&lt;String&gt; ids, List&lt;Embedding&gt;, List&lt;TextSegment&gt;)</code> adds a list of given <code>Embedding</code>s with associated IDs and <code>TextSegment</code>s to the store</li>
<li><code>EmbeddingStore.search(EmbeddingSearchRequest)</code> searches for the most similar <code>Embedding</code>s</li>
<li><code>EmbeddingStore.remove(String id)</code> removes a single <code>Embedding</code> from the store by ID</li>
<li><code>EmbeddingStore.removeAll(Collection&lt;String&gt; ids)</code> removes multiple <code>Embedding</code>s from the store by ID</li>
<li><code>EmbeddingStore.removeAll(Filter)</code> removes all <code>Embedding</code>s that match the specified <code>Filter</code> from the store</li>
<li><code>EmbeddingStore.removeAll()</code> removes all <code>Embedding</code>s from the store</li>
</ul></div></div></details>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="embeddingsearchrequest">EmbeddingSearchRequest<a href="https://docs.langchain4j.dev/tutorials/rag#embeddingsearchrequest" class="hash-link" aria-label="Direct link to EmbeddingSearchRequest" title="Direct link to EmbeddingSearchRequest">​</a></h4>
<p>The <code>EmbeddingSearchRequest</code> represents a request to search in an <code>EmbeddingStore</code>.
It has the following attributes:</p>
<ul>
<li><code>Embedding queryEmbedding</code>: The embedding used as a reference.</li>
<li><code>int maxResults</code>: The maximum number of results to return. This is an optional parameter. Default: 3.</li>
<li><code>double minScore</code>: The minimum score, ranging from 0 to 1 (inclusive). Only embeddings with a score &gt;= <code>minScore</code> will be returned. This is an optional parameter. Default: 0.</li>
<li><code>Filter filter</code>: The filter to be applied to the <code>Metadata</code> during search. Only <code>TextSegment</code>s whose <code>Metadata</code> matches the <code>Filter</code> will be returned.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="filter">Filter<a href="https://docs.langchain4j.dev/tutorials/rag#filter" class="hash-link" aria-label="Direct link to Filter" title="Direct link to Filter">​</a></h4>
<p>The <code>Filter</code> allows filtering by <code>Metadata</code> entries when performing a vector search.
More details about <code>Filter</code> can be found <a href="https://github.com/langchain4j/langchain4j/pull/610" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="embeddingsearchresult">EmbeddingSearchResult<a href="https://docs.langchain4j.dev/tutorials/rag#embeddingsearchresult" class="hash-link" aria-label="Direct link to EmbeddingSearchResult" title="Direct link to EmbeddingSearchResult">​</a></h4>
<p>The <code>EmbeddingSearchResult</code> represents a result of a search in an <code>EmbeddingStore</code>.
It contains the list of <code>EmbeddingMatch</code>es.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-match">Embedding Match<a href="https://docs.langchain4j.dev/tutorials/rag#embedding-match" class="hash-link" aria-label="Direct link to Embedding Match" title="Direct link to Embedding Match">​</a></h4>
<p>The <code>EmbeddingMatch</code> represents a matched <code>Embedding</code> along with its relevance score, ID, and original embedded data (usually <code>TextSegment</code>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-store-ingestor">Embedding Store Ingestor<a href="https://docs.langchain4j.dev/tutorials/rag#embedding-store-ingestor" class="hash-link" aria-label="Direct link to Embedding Store Ingestor" title="Direct link to Embedding Store Ingestor">​</a></h3>
<p>The <code>EmbeddingStoreIngestor</code> represents an ingestion pipeline and is responsible for
ingesting <code>Document</code>s into an <code>EmbeddingStore</code>.</p>
<p>In the simplest configuration, <code>EmbeddingStoreIngestor</code> embeds provided <code>Document</code>s
using a specified <code>EmbeddingModel</code> and stores them, along with their <code>Embedding</code>s in a specified <code>EmbeddingStore</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">EmbeddingStoreIngestor</span><span class="token plain"> ingestor </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">EmbeddingStoreIngestor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">ingestor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">ingest</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">document1</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">ingestor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">ingest</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">document2</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> document3</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">IngestionResult</span><span class="token plain"> ingestionResult </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> ingestor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">ingest</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">List</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">of</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">document4</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> document5</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> document6</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All <code>ingest()</code> methods in <code>EmbeddingStoreIngestor</code> return an <code>IngestionResult</code>.
The <code>IngestionResult</code> contains useful information, including <code>TokenUsage</code>,
which shows how many tokens were used for embedding.</p>
<p>Optionally, the <code>EmbeddingStoreIngestor</code> can transform <code>Document</code>s using a specified <code>DocumentTransformer</code>.
This can be useful if you want to clean, enrich, or format <code>Document</code>s before embedding them.</p>
<p>Optionally, the <code>EmbeddingStoreIngestor</code> can split <code>Document</code>s into <code>TextSegment</code>s using a specified <code>DocumentSplitter</code>.
This can be useful if <code>Document</code>s are big, and you want to split them into smaller <code>TextSegment</code>s to improve the quality
of similarity searches and reduce the size and cost of a prompt sent to the LLM.</p>
<p>Optionally, the <code>EmbeddingStoreIngestor</code> can transform <code>TextSegment</code>s using a specified <code>TextSegmentTransformer</code>.
This can be useful if you want to clean, enrich, or format <code>TextSegment</code>s before embedding them.</p>
<p>An example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">EmbeddingStoreIngestor</span><span class="token plain"> ingestor </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">EmbeddingStoreIngestor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// adding userId metadata entry to each Document to be able to filter by it later</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">documentTransformer</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">document </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        document</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">metadata</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">put</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"userId"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token string" style="color: rgb(227, 17, 108);">"12345"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token keyword" style="color: rgb(0, 0, 159);">return</span><span class="token plain"> document</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">}</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// splitting each Document into TextSegments of 1000 tokens each, with a 200-token overlap</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">documentSplitter</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">DocumentSplitters</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">recursive</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">1000</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(54, 172, 170);">200</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"> </span><span class="token keyword" style="color: rgb(0, 0, 159);">new</span><span class="token plain"> </span><span class="token class-name">OpenAiTokenizer</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// adding a name of the Document to each TextSegment to improve the quality of search</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">textSegmentTransformer</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">textSegment </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token class-name">TextSegment</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">from</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">            textSegment</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">metadata</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"file_name"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"> </span><span class="token operator" style="color: rgb(57, 58, 52);">+</span><span class="token plain"> </span><span class="token string" style="color: rgb(227, 17, 108);">"\n"</span><span class="token plain"> </span><span class="token operator" style="color: rgb(57, 58, 52);">+</span><span class="token plain"> textSegment</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">text</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">,</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">            textSegment</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">metadata</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="naive-rag">Naive RAG<a href="https://docs.langchain4j.dev/tutorials/rag#naive-rag" class="hash-link" aria-label="Direct link to Naive RAG" title="Direct link to Naive RAG">​</a></h2>
<p>Once our documents are ingested (see previous sections), we can create
an <code>EmbeddingStoreContentRetriever</code> to enable naive RAG functionality.</p>
<p>When using <a href="https://docs.langchain4j.dev/tutorials/ai-services">AI Services</a>, naive RAG can be configured as follows:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">ContentRetriever</span><span class="token plain"> contentRetriever </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">EmbeddingStoreContentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">maxResults</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">5</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">minScore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">0.75</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">Assistant</span><span class="token plain"> assistant </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">AiServices</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">Assistant</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token keyword" style="color: rgb(0, 0, 159);">class</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chatLanguageModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">model</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">contentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">contentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_2_naive/Naive_RAG_Example.java" target="_blank" rel="noopener noreferrer">Naive RAG Example</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-rag">Advanced RAG<a href="https://docs.langchain4j.dev/tutorials/rag#advanced-rag" class="hash-link" aria-label="Direct link to Advanced RAG" title="Direct link to Advanced RAG">​</a></h2>
<p>Advanced RAG can be implemented with LangChain4j with the following core components:</p>
<ul>
<li><code>QueryTransformer</code></li>
<li><code>QueryRouter</code></li>
<li><code>ContentRetriever</code></li>
<li><code>ContentAggregator</code></li>
<li><code>ContentInjector</code></li>
</ul>
<p>The following diagram shows how these components work together:
<a href="https://docs.langchain4j.dev/tutorials/rag"><img decoding="async" loading="lazy" src="./RAG (Retrieval-Augmented Generation) _ LangChain4j_files/advanced-rag-fb84283d02470b835ff2f4913f08fdbf.png" width="533" height="1163" class="img_ev3q"></a></p>
<p>The process is as follows:</p>
<ol>
<li>The user produces a <code>UserMessage</code>, which is converted into a <code>Query</code></li>
<li>The <code>QueryTransformer</code> transforms the <code>Query</code> into one or multiple <code>Query</code>s</li>
<li>Each <code>Query</code> is routed by the <code>QueryRouter</code> to one or more <code>ContetRetriever</code>s</li>
<li>Each <code>ContetRetriever</code> retrieves relevant <code>Content</code>s for each <code>Query</code></li>
<li>The <code>ContentAggregator</code> combines all retrieved <code>Content</code>s into a single final ranked list</li>
<li>This list of <code>Content</code>s is injected into the original <code>UserMessage</code></li>
<li>Finally, the <code>UserMessage</code>, containing the original query along with the injected relevant content, is sent to the LLM</li>
</ol>
<p>Please refer to the Javadoc of each component for more details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieval-augmentor">Retrieval Augmentor<a href="https://docs.langchain4j.dev/tutorials/rag#retrieval-augmentor" class="hash-link" aria-label="Direct link to Retrieval Augmentor" title="Direct link to Retrieval Augmentor">​</a></h3>
<p><code>RetrievalAugmentor</code> is an entry point into the RAG pipeline.
It is responsible for augmenting a <code>ChatMessage</code> with relevant <code>Content</code>s
retrieved from various sources.</p>
<p>An instance of a <code>RetrievalAugmentor</code> can be specified during the creation of an <a href="https://docs.langchain4j.dev/tutorials/ai-services">AI Service</a>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">Assistant</span><span class="token plain"> assistant </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">AiServices</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">Assistant</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token keyword" style="color: rgb(0, 0, 159);">class</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">retrievalAugmentor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">retrievalAugmentor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Every time an AI Service is invoked, the specified <code>RetrievalAugmentor</code>
will be called to augment the current <code>UserMessage</code>.</p>
<p>You can use the default implementation of a <code>RetrievalAugmentor</code>
(described below) or implement a custom one.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-retrieval-augmentor">Default Retrieval Augmentor<a href="https://docs.langchain4j.dev/tutorials/rag#default-retrieval-augmentor" class="hash-link" aria-label="Direct link to Default Retrieval Augmentor" title="Direct link to Default Retrieval Augmentor">​</a></h3>
<p>LangChain4j provides an out-of-the-box implementation of the <code>RetrievalAugmentor</code> interface:
<code>DefaultRetrievalAugmentor</code>, which should be suitable for the majority of RAG use cases.
It was inspired by <a href="https://blog.langchain.dev/deconstructing-rag" target="_blank" rel="noopener noreferrer">this article</a>
and <a href="https://arxiv.org/abs/2312.10997" target="_blank" rel="noopener noreferrer">this paper</a>.
It is recommended to review these resources for a better understanding of the concept.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query">Query<a href="https://docs.langchain4j.dev/tutorials/rag#query" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">​</a></h3>
<p><code>Query</code> represents a user query in the RAG pipeline.
It contains the text of the query and query metadata.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-metadata">Query Metadata<a href="https://docs.langchain4j.dev/tutorials/rag#query-metadata" class="hash-link" aria-label="Direct link to Query Metadata" title="Direct link to Query Metadata">​</a></h4>
<p>The <code>Metadata</code> inside the <code>Query</code> contains information that might be useful in various components
of the RAG pipeline, for example:</p>
<ul>
<li><code>Metadata.userMessage()</code> - the original <code>UserMessage</code> that should be augmented</li>
<li><code>Metadata.chatMemoryId()</code> - the value of a <code>@MemoryId</code>-annotated method parameter. More details <a href="https://docs.langchain4j.dev/tutorials/ai-services/#chat-memory">here</a>. This can be used to identify the user and apply access restrictions or filters during the retrieval.</li>
<li><code>Metadata.chatMemory()</code> - all previous <code>ChatMessage</code>s. This can help to understand the context in which the <code>Query</code> was asked.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-transformer">Query Transformer<a href="https://docs.langchain4j.dev/tutorials/rag#query-transformer" class="hash-link" aria-label="Direct link to Query Transformer" title="Direct link to Query Transformer">​</a></h3>
<p><code>QueryTransformer</code> transforms the given <code>Query</code> into one or multiple <code>Query</code>s.
The goal is to enhance retrieval quality by modifying or expanding the original <code>Query</code>.</p>
<p>Some known approaches to improve retrieval include:</p>
<ul>
<li>Query compression</li>
<li>Query expansion</li>
<li>Query re-writing</li>
<li>Step-back prompting</li>
<li>Hypothetical document embeddings (HyDE)</li>
</ul>
<p>More details can be found <a href="https://blog.langchain.dev/query-transformations/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-query-transformer">Default Query Transformer<a href="https://docs.langchain4j.dev/tutorials/rag#default-query-transformer" class="hash-link" aria-label="Direct link to Default Query Transformer" title="Direct link to Default Query Transformer">​</a></h4>
<p><code>DefaultQueryTransformer</code> is the default implementation used in <code>DefaultRetrievalAugmentor</code>.
It does not make any modifications to the <code>Query</code>, it just passes it through.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compressing-query-transformer">Compressing Query Transformer<a href="https://docs.langchain4j.dev/tutorials/rag#compressing-query-transformer" class="hash-link" aria-label="Direct link to Compressing Query Transformer" title="Direct link to Compressing Query Transformer">​</a></h4>
<p><code>CompressingQueryTransformer</code> uses an LLM to compress the given <code>Query</code>
and previous conversation into a standalone <code>Query</code>.
This is useful when the user might ask follow-up questions that refer to information
in previous questions or answers.</p>
<p>Here is an example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">User: Tell me about John Doe</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">AI: John Doe was a ...</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">User: Where did he live?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The query <code>Where did he live?</code> by itself would not be able to retrieve the needed information
because there is no explicit reference to John Doe, making it unclear who <code>he</code> refers to.</p>
<p>When using <code>CompressingQueryTransformer</code>, the LLM will read the entire conversation
and transform <code>Where did he live?</code> into <code>Where did John Doe live?</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="expanding-query-transformer">Expanding Query Transformer<a href="https://docs.langchain4j.dev/tutorials/rag#expanding-query-transformer" class="hash-link" aria-label="Direct link to Expanding Query Transformer" title="Direct link to Expanding Query Transformer">​</a></h4>
<p><code>ExpandingQueryTransformer</code> uses an LLM to expand the given <code>Query</code> into multiple <code>Query</code>s.
This is useful because LLM can rephrase and reformulate <code>Query</code> in various ways,
which will help to retrieve more relevant content.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="content">Content<a href="https://docs.langchain4j.dev/tutorials/rag#content" class="hash-link" aria-label="Direct link to Content" title="Direct link to Content">​</a></h3>
<p><code>Content</code> represents the content relevant to the user <code>Query</code>.
Currently, it is limited to text content (i.e., <code>TextSegment</code>),
but in the future it may support other modalities (e.g., images, audio, video, etc.).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="content-retriever">Content Retriever<a href="https://docs.langchain4j.dev/tutorials/rag#content-retriever" class="hash-link" aria-label="Direct link to Content Retriever" title="Direct link to Content Retriever">​</a></h3>
<p><code>ContentRetriever</code> retrieves <code>Content</code>s from an underlying data source using a given <code>Query</code>.
The underlying data source can be virtually anything:</p>
<ul>
<li>Embedding store</li>
<li>Full-text search engine</li>
<li>Hybrid of vector and full-text search</li>
<li>Web Search Engine</li>
<li>Knowledge graph</li>
<li>SQL database</li>
<li>etc.</li>
</ul>
<p>The list of <code>Content</code> returned by <code>ContentRetriever</code> is ordered by relevance, from highest to lowest.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-store-content-retriever">Embedding Store Content Retriever<a href="https://docs.langchain4j.dev/tutorials/rag#embedding-store-content-retriever" class="hash-link" aria-label="Direct link to Embedding Store Content Retriever" title="Direct link to Embedding Store Content Retriever">​</a></h4>
<p><code>EmbeddingStoreContentRetriever</code> retrieves relevant <code>Content</code> from the <code>EmbeddingStore</code> using
the <code>EmbeddingModel</code> to embed the <code>Query</code>.</p>
<p>Here is an example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">EmbeddingStore</span><span class="token plain"> embeddingStore </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">EmbeddingModel</span><span class="token plain"> embeddingModel </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">ContentRetriever</span><span class="token plain"> contentRetriever </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">EmbeddingStoreContentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingStore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">embeddingModel</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">maxResults</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">3</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">     </span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// maxResults can also be specified dynamically depending on the query</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">dynamicMaxResults</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">query </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token number" style="color: rgb(54, 172, 170);">3</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">minScore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">0.75</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">     </span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// minScore can also be specified dynamically depending on the query</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">dynamicMinScore</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">query </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token number" style="color: rgb(54, 172, 170);">0.75</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">filter</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token function" style="color: rgb(215, 58, 73);">metadataKey</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"userId"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">isEqualTo</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"12345"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token comment" style="color: rgb(153, 153, 136); font-style: italic;">// filter can also be specified dynamically depending on the query</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">dynamicFilter</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">query </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> userId </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token function" style="color: rgb(215, 58, 73);">getUserId</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">query</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">metadata</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chatMemoryId</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token keyword" style="color: rgb(0, 0, 159);">return</span><span class="token plain"> </span><span class="token function" style="color: rgb(215, 58, 73);">metadataKey</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"userId"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">isEqualTo</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">userId</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">}</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="web-search-content-retriever">Web Search Content Retriever<a href="https://docs.langchain4j.dev/tutorials/rag#web-search-content-retriever" class="hash-link" aria-label="Direct link to Web Search Content Retriever" title="Direct link to Web Search Content Retriever">​</a></h4>
<p><code>WebSearchContentRetriever</code> retrieves relevant <code>Content</code> from the web using a <code>WebSearchEngine</code>.</p>
<p>All supported <code>WebSearchEngine</code> integrations can be <a href="https://docs.langchain4j.dev/category/web-search-engines">found here</a>.</p>
<p>Here is an example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">WebSearchEngine</span><span class="token plain"> googleSearchEngine </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">GoogleCustomWebSearchEngine</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">apiKey</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">System</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getenv</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"GOOGLE_API_KEY"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">csi</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">System</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">getenv</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"GOOGLE_SEARCH_ENGINE_ID"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">ContentRetriever</span><span class="token plain"> contentRetriever </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">WebSearchContentRetriever</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">webSearchEngine</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">googleSearchEngine</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">maxResults</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token number" style="color: rgb(54, 172, 170);">3</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Complete example can be found <a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_08_Advanced_RAG_Web_Search_Example.java" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sql-database-content-retriever">SQL Database Content Retriever<a href="https://docs.langchain4j.dev/tutorials/rag#sql-database-content-retriever" class="hash-link" aria-label="Direct link to SQL Database Content Retriever" title="Direct link to SQL Database Content Retriever">​</a></h4>
<p><code>SqlDatabaseContentRetriever</code> is an experimental implementation of the <code>ContentRetriever</code>
that can be found in the <code>langchain4j-experimental-sql</code> module.</p>
<p>It uses the <code>DataSource</code> and an LLM to generate and execute SQL queries
for given natural language <code>Query</code>.</p>
<p>See javadoc of the <code>SqlDatabaseContentRetriever</code> for more information.</p>
<p>Here is an <a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_10_Advanced_RAG_SQL_Database_Retreiver_Example.java" target="_blank" rel="noopener noreferrer">example</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="azure-ai-search-content-retriever">Azure AI Search Content Retriever<a href="https://docs.langchain4j.dev/tutorials/rag#azure-ai-search-content-retriever" class="hash-link" aria-label="Direct link to Azure AI Search Content Retriever" title="Direct link to Azure AI Search Content Retriever">​</a></h4>
<p><code>AzureAiSearchContentRetriever</code> is an integration with
<a href="https://azure.microsoft.com/en-us/products/ai-services/ai-search" target="_blank" rel="noopener noreferrer">Azure AI Search</a>.
It supports full-text, vector, and hybrid search, as well as re-ranking.
It can be found in the <code>langchain4j-azure-ai-search</code> module.
Please refer to the <code>AzureAiSearchContentRetriever</code> Javadoc for more information.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="neo4j-content-retriever">Neo4j Content Retriever<a href="https://docs.langchain4j.dev/tutorials/rag#neo4j-content-retriever" class="hash-link" aria-label="Direct link to Neo4j Content Retriever" title="Direct link to Neo4j Content Retriever">​</a></h4>
<p><code>Neo4jContentRetriever</code> is an integration with the <a href="https://neo4j.com/" target="_blank" rel="noopener noreferrer">Neo4j</a> graph database.
It converts natural language queries into Neo4j Cypher queries
and retrieves relevant information by running these queries in Neo4j.
It can be found in the <code>langchain4j-neo4j</code> module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-router">Query Router<a href="https://docs.langchain4j.dev/tutorials/rag#query-router" class="hash-link" aria-label="Direct link to Query Router" title="Direct link to Query Router">​</a></h3>
<p><code>QueryRouter</code> is responsible for routing <code>Query</code> to the appropriate <code>ContentRetriever</code>(s).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-query-router">Default Query Router<a href="https://docs.langchain4j.dev/tutorials/rag#default-query-router" class="hash-link" aria-label="Direct link to Default Query Router" title="Direct link to Default Query Router">​</a></h4>
<p><code>DefaultQueryRouter</code> is the default implementation used in <code>DefaultRetrievalAugmentor</code>.
It routes each <code>Query</code> to all configured <code>ContentRetriever</code>s.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="language-model-query-router">Language Model Query Router<a href="https://docs.langchain4j.dev/tutorials/rag#language-model-query-router" class="hash-link" aria-label="Direct link to Language Model Query Router" title="Direct link to Language Model Query Router">​</a></h4>
<p><code>LanguageModelQueryRouter</code> uses the LLM to decide where to route the given <code>Query</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="content-aggregator">Content Aggregator<a href="https://docs.langchain4j.dev/tutorials/rag#content-aggregator" class="hash-link" aria-label="Direct link to Content Aggregator" title="Direct link to Content Aggregator">​</a></h3>
<p>The <code>ContentAggregator</code> is responsible for aggregating multiple ranked lists of <code>Content</code> from:</p>
<ul>
<li>multiple <code>Query</code>s</li>
<li>multiple <code>ContentRetriever</code>s</li>
<li>both</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-content-aggregator">Default Content Aggregator<a href="https://docs.langchain4j.dev/tutorials/rag#default-content-aggregator" class="hash-link" aria-label="Direct link to Default Content Aggregator" title="Direct link to Default Content Aggregator">​</a></h4>
<p>The <code>DefaultContentAggregator</code> is the default implementation of <code>ContentAggregator</code>,
which performs two-stage Reciprocal Rank Fusion (RRF).
Please see <code>DefaultContentAggregator</code> Javadoc for more details.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="re-ranking-content-aggregator">Re-Ranking Content Aggregator<a href="https://docs.langchain4j.dev/tutorials/rag#re-ranking-content-aggregator" class="hash-link" aria-label="Direct link to Re-Ranking Content Aggregator" title="Direct link to Re-Ranking Content Aggregator">​</a></h4>
<p>The <code>ReRankingContentAggregator</code> uses a <code>ScoringModel</code>, like Cohere, to perform re-ranking.
The complete list of supported scoring (re-ranking) models can be found
<a href="https://docs.langchain4j.dev/category/scoring-reranking-models" target="_blank" rel="noopener noreferrer">here</a>.
Please see <code>ReRankingContentAggregator</code> Javadoc for more details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="content-injector">Content Injector<a href="https://docs.langchain4j.dev/tutorials/rag#content-injector" class="hash-link" aria-label="Direct link to Content Injector" title="Direct link to Content Injector">​</a></h3>
<p><code>ContentInjector</code> is responsible for injecting of <code>Content</code>s returned by <code>ContentAggregator</code> into the <code>UserMessage</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-content-injector">Default Content Injector<a href="https://docs.langchain4j.dev/tutorials/rag#default-content-injector" class="hash-link" aria-label="Direct link to Default Content Injector" title="Direct link to Default Content Injector">​</a></h4>
<p><code>DefaultContentInjector</code> is the default implementation of <code>ContentInjector</code> that simply appends <code>Content</code>s
to the end of a <code>UserMessage</code> with the prefix <code>Answer using the following information:</code>.</p>
<p>You can customize how <code>Content</code>s are injected into the <code>UserMessage</code> in 3 ways:</p>
<ul>
<li>Override the default <code>PromptTemplate</code>:</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">RetrievalAugmentor</span><span class="token plain"> retrievalAugmentor </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> </span><span class="token class-name">DefaultRetrievalAugmentor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">contentInjector</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">DefaultContentInjector</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">promptTemplate</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">PromptTemplate</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">from</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"{{userMessage}}\n{{contents}}"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please note that <code>PromptTemplate</code> must contain <code>{{userMessage}}</code> and <code>{{contents}}</code> variables.</p>
<ul>
<li>Extend <code>DefaultContentInjector</code> and override one of the <code>format</code> methods</li>
<li>Implement a custom <code>ContentInjector</code></li>
</ul>
<p><code>DefaultContentInjector</code> also supports injecting <code>Metadata</code> entries from retrieved <code>Content.textSegment()</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">DefaultContentInjector</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">metadataKeysToInclude</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">List</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">of</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"source"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, <code>TextSegment.text()</code> will be prepended with the "content: " prefix,
and each value from <code>Metadata</code> will be prepended with a key.
The final <code>UserMessage</code> will look like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">How can I cancel my reservation?</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">Answer using the following information:</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">content: To cancel a reservation, go to ...</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">source: ./cancellation_procedure.html</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">content: Cancellation is allowed for ...</span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">source: ./cancellation_policy.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parallelization">Parallelization<a href="https://docs.langchain4j.dev/tutorials/rag#parallelization" class="hash-link" aria-label="Direct link to Parallelization" title="Direct link to Parallelization">​</a></h3>
<p>When there is only a single <code>Query</code> and a single <code>ContentRetriever</code>,
<code>DefaultRetrievalAugmentor</code> performs query routing and content retrieval in the same thread.
Otherwise, an <code>Executor</code> is used to parallelize the processing.
By default, a modified (<code>keepAliveTime</code> is 1 second instead of 60 seconds) <code>Executors.newCachedThreadPool()</code>
is used, but you can provide a custom <code>Executor</code> instance when creating the <code>DefaultRetrievalAugmentor</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token class-name">DefaultRetrievalAugmentor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">builder</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">executor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">executor</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token plain">build</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-sources">Accessing Sources<a href="https://docs.langchain4j.dev/tutorials/rag#accessing-sources" class="hash-link" aria-label="Direct link to Accessing Sources" title="Direct link to Accessing Sources">​</a></h2>
<p>If you wish to access the sources (retrieved <code>Content</code>s used to augment the message)
when using <a href="https://docs.langchain4j.dev/tutorials/ai-services">AI Services</a>,
you can easily do so by wrapping the return type in the <code>Result</code> class:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token keyword" style="color: rgb(0, 0, 159);">interface</span><span class="token plain"> </span><span class="token class-name">Assistant</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token class-name">Result</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> </span><span class="token function" style="color: rgb(215, 58, 73);">chat</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">String</span><span class="token plain"> userMessage</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(57, 58, 52);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">Result</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> result </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> assistant</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chat</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"How to do Easy RAG with LangChain4j?"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> answer </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> result</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">content</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&lt;</span><span class="token generics class-name">Content</span><span class="token generics punctuation" style="color: rgb(57, 58, 52);">&gt;</span><span class="token plain"> sources </span><span class="token operator" style="color: rgb(57, 58, 52);">=</span><span class="token plain"> result</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">sources</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When streaming, a <code>Consumer&lt;List&lt;Content&gt;&gt;</code> can be specified using the <code>onRetrieved()</code> method:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #393A34; --prism-background-color: #f6f8fa;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color: rgb(57, 58, 52); background-color: rgb(246, 248, 250);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token keyword" style="color: rgb(0, 0, 159);">interface</span><span class="token plain"> </span><span class="token class-name">Assistant</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token class-name">TokenStream</span><span class="token plain"> </span><span class="token function" style="color: rgb(215, 58, 73);">chat</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token class-name">String</span><span class="token plain"> userMessage</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(57, 58, 52);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">assistant</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">chat</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token string" style="color: rgb(227, 17, 108);">"How to do Easy RAG with LangChain4j?"</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">onRetrieved</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">sources </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">onNext</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">token </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">onError</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token plain">error </span><span class="token operator" style="color: rgb(57, 58, 52);">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(57, 58, 52);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(57, 58, 52);">.</span><span class="token function" style="color: rgb(215, 58, 73);">start</span><span class="token punctuation" style="color: rgb(57, 58, 52);">(</span><span class="token punctuation" style="color: rgb(57, 58, 52);">)</span><span class="token punctuation" style="color: rgb(57, 58, 52);">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="https://docs.langchain4j.dev/tutorials/rag#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h2>
<ul>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_1_easy/Easy_RAG_Example.java" target="_blank" rel="noopener noreferrer">Easy RAG</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_2_naive/Naive_RAG_Example.java" target="_blank" rel="noopener noreferrer">Naive RAG</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_01_Advanced_RAG_with_Query_Compression_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with Query Compression</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_02_Advanced_RAG_with_Query_Routing_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with Query Routing</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_03_Advanced_RAG_with_ReRanking_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with Re-Ranking</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_04_Advanced_RAG_with_Metadata_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with Including Metadata</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_05_Advanced_RAG_with_Metadata_Filtering_Examples.java" target="_blank" rel="noopener noreferrer">Advanced RAG with Metadata Filtering</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_07_Advanced_RAG_Multiple_Retrievers_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with multiple Retrievers</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_08_Advanced_RAG_Web_Search_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with Web Search</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_10_Advanced_RAG_SQL_Database_Retreiver_Example.java" target="_blank" rel="noopener noreferrer">Advanced RAG with SQL Database</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_06_Advanced_RAG_Skip_Retrieval_Example.java" target="_blank" rel="noopener noreferrer">Skipping Retrieval</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/customer-support-agent-example/src/test/java/dev/langchain4j/example/CustomerSupportAgentApplicationTest.java" target="_blank" rel="noopener noreferrer">RAG + Tools</a></li>
<li><a href="https://github.com/langchain4j/langchain4j-examples/blob/main/other-examples/src/main/java/DocumentLoaderExamples.java" target="_blank" rel="noopener noreferrer">Loading Documents</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/langchain4j/langchain4j/blob/main/docs/docs/tutorials/7-rag.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="https://docs.langchain4j.dev/tutorials/tools"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tools (Function Calling)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="https://docs.langchain4j.dev/tutorials/structured-outputs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Structured Outputs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="https://docs.langchain4j.dev/tutorials/rag#what-is-rag" class="table-of-contents__link toc-highlight table-of-contents__link--active">What is RAG?</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#rag-stages" class="table-of-contents__link toc-highlight">RAG Stages</a><ul><li><a href="https://docs.langchain4j.dev/tutorials/rag#indexing" class="table-of-contents__link toc-highlight">Indexing</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#retrieval" class="table-of-contents__link toc-highlight">Retrieval</a></li></ul></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#rag-flavours-in-langchain4j" class="table-of-contents__link toc-highlight">RAG Flavours in LangChain4j</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#easy-rag" class="table-of-contents__link toc-highlight">Easy RAG</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#core-rag-apis" class="table-of-contents__link toc-highlight">Core RAG APIs</a><ul><li><a href="https://docs.langchain4j.dev/tutorials/rag#document" class="table-of-contents__link toc-highlight">Document</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#metadata" class="table-of-contents__link toc-highlight">Metadata</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#document-loader" class="table-of-contents__link toc-highlight">Document Loader</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#document-parser" class="table-of-contents__link toc-highlight">Document Parser</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#document-transformer" class="table-of-contents__link toc-highlight">Document Transformer</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#text-segment" class="table-of-contents__link toc-highlight">Text Segment</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#document-splitter" class="table-of-contents__link toc-highlight">Document Splitter</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#text-segment-transformer" class="table-of-contents__link toc-highlight">Text Segment Transformer</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#embedding" class="table-of-contents__link toc-highlight">Embedding</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#embedding-model" class="table-of-contents__link toc-highlight">Embedding Model</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#embedding-store" class="table-of-contents__link toc-highlight">Embedding Store</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#embedding-store-ingestor" class="table-of-contents__link toc-highlight">Embedding Store Ingestor</a></li></ul></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#naive-rag" class="table-of-contents__link toc-highlight">Naive RAG</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#advanced-rag" class="table-of-contents__link toc-highlight">Advanced RAG</a><ul><li><a href="https://docs.langchain4j.dev/tutorials/rag#retrieval-augmentor" class="table-of-contents__link toc-highlight">Retrieval Augmentor</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#default-retrieval-augmentor" class="table-of-contents__link toc-highlight">Default Retrieval Augmentor</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#query" class="table-of-contents__link toc-highlight">Query</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#query-transformer" class="table-of-contents__link toc-highlight">Query Transformer</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#content" class="table-of-contents__link toc-highlight">Content</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#content-retriever" class="table-of-contents__link toc-highlight">Content Retriever</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#query-router" class="table-of-contents__link toc-highlight">Query Router</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#content-aggregator" class="table-of-contents__link toc-highlight">Content Aggregator</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#content-injector" class="table-of-contents__link toc-highlight">Content Injector</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#parallelization" class="table-of-contents__link toc-highlight">Parallelization</a></li></ul></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#accessing-sources" class="table-of-contents__link toc-highlight">Accessing Sources</a></li><li><a href="https://docs.langchain4j.dev/tutorials/rag#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://docs.langchain4j.dev/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="https://docs.langchain4j.dev/get-started">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="https://docs.langchain4j.dev/category/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="https://docs.langchain4j.dev/category/integrations">Integrations</a></li><li class="footer__item"><a class="footer__link-item" href="https://docs.langchain4j.dev/useful-materials">Useful Materials</a></li><li class="footer__item"><a href="https://github.com/langchain4j/langchain4j-examples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Examples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/langchain4j/langchain4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/langchain4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.com/invite/JzTFvyjG6R" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/langchain4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">LangChain4j Documentation 2024. Built with Docusaurus.</div></div></div></footer></div>

</body></html>